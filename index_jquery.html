<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Trac #2034(JQuery ver.)</title>
    <style>
        body {
            font-family: "Consolas", "Courier New", "Calibri", "標楷體";
        }

        .title {
            color: #0bf;
        }

        .ver:hover {
            text-decoration: underline;
            color: #0ff;
            cursor: pointer;
        }

        a {
            text-decoration: none;
        }

        a>h1:hover {
            text-decoration: underline;
        }

        a>h1:active {
            color: #0ff;
        }

        .btn {
            display: inline-block;
            color: #04b;
        }


        .btn:hover {
            cursor: pointer;
            color: #0ff;
        }

        .result {
            display: inline;
            color: #000;
        }

        .date {
            display: inline-block;
            border-radius: 5px;
        }
    </style>
</head>

<body>

    <a href="https://issue.104corp.work/trac/ticket/2034" target="_blank">
        <h1 class="title">#2034 JavaScript練習</h1>
    </a>

    <a href="./index.html">
        <p class="ver">Go to JS ver.</p>
    </a>

    <p class="date"></p>
    <br>

    <p id="btn_confirm" class="btn">Confirm test</p>
    <br>

    <p id="btn_prompt" class="btn">Prompt test
        <span class="result"></span>
    </p>
    <br>

    <p id="btn_alert" class="btn">Alert test</p>
    <br>

    <label>Add item: (可用 ',' 分隔)</label>
    <br>
    <input type="text" class="input">
    <button class="submit">submit</button>
    <br>

    <ul class="list">
    </ul>


    <script>
        function htmlEncoding(str) {
            return str.replace(/&/g, "&amp;")
                .replace(/>/g, "&gt;")
                .replace(/</g, "&lt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
    </script>

    <script>
        //update date
        function updateTime() {
            var $element_date = $(".date");
            var time = new Date();
            var percent = 100 / 60 * time.getSeconds();
            $element_date.html(time.toLocaleString());
            $element_date.css("background", "linear-gradient(90deg, #fd5 " + percent + "%, #f88 " + (percent + 10) + "%)");
        }
        updateTime();
        setInterval(() => updateTime(), 1000);
        //confirm click
        $("#btn_confirm").click(() => {
            if (confirm("go to #2034?")) {
                $(".title")[0].click();
            }
        });

        //prompt click
        $("#btn_prompt").click(() => {
            let words = prompt("Enter some words.", "");
            let $element_result = $(".result");
            if (words === null) {
                return $element_result.html("");
            }
            $element_result.html(" - result: " + htmlEncoding(words));
        });

        //alert click
        $("#btn_alert").click(() => {
            alert("Hello!");
        });

        //Add item to list
        $(".submit").click(() => {
            let $element_input = $(".input");
            let $element_list = $(".list");
            let items = $element_input.val().split(",");
            $element_input.val("");

            for (var item of items) {
                $element_list.append("<li>" + htmlEncoding(item) + "</li>");
            }
        });
    </script>

</body>

</html>